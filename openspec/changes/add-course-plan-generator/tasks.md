# 課程計劃生成器 - 實作任務清單

## 階段 1: 專案基礎架構

- [x] 1.1 初始化 Python 後端專案（Flask/FastAPI）
- [x] 1.2 建立前端 HTML/CSS/JavaScript 結構
- [x] 1.3 設定專案依賴管理（requirements.txt, package.json）
- [x] 1.4 建立資料庫 schema（課程計劃、API keys、prompts）
- [x] 1.5 設定環境變數管理系統

## 階段 2: OpenAI API 整合

- [x] 2.1 實作 OpenAI API client
- [x] 2.2 建立 API key 安全儲存機制（加密）
- [x] 2.3 設計 prompt template 系統
- [x] 2.4 實作 prompt 管理 API (CRUD)
- [ ] 2.5 建立 API 錯誤處理和重試機制

## 階段 3: 後端 API 開發

- [x] 3.1 實作基本課程資訊 API
- [x] 3.2 實作教學理念生成 API
- [x] 3.3 實作學習目標生成 API
- [x] 3.4 實作教學策略生成 API
- [x] 3.5 實作教學流程生成 API
- [ ] 3.6 實作 PPT 生成 API
- [ ] 3.7 實作學習單生成 API
- [x] 3.8 實作檔案上傳功能（教案內容）

## 階段 4: 前端開發

- [x] 4.1 設計並實作多步驟表單 UI
- [x] 4.2 實作基本資訊輸入表單
- [x] 4.3 實作教學理念顯示與編輯介面
- [x] 4.4 實作學習目標顯示與編輯介面
- [x] 4.5 實作教學策略顯示與編輯介面
- [x] 4.6 實作教學流程顯示與編輯介面
- [ ] 4.7 實作 PPT/學習單預覽與下載功能
- [x] 4.8 實作 Prompt 設定頁面入口（進階設定選單）

## 階段 5: 七步驟工作流程

- [x] 5.1 實作步驟 1：基本資訊 → 教學理念（第一個「下一步」）
- [x] 5.2 實作步驟 2：教學理念 → 學習目標（第二個「下一步」）
- [x] 5.3 實作步驟 3：學習目標 → 教學策略（第三個「下一步」）
- [x] 5.4 實作步驟 4：教學策略 → 教學流程（第四個「下一步」）
- [ ] 5.5 實作步驟 5：教學流程 → PPT（第五個「下一步」）
- [ ] 5.6 實作步驟 6：教學流程 → 學習單（第六個「下一步」）
- [ ] 5.7 實作步驟 7：最終確認與下載（第七個「下一步」）
- [x] 5.8 實作步驟間數據傳遞機制
- [x] 5.9 實作每個階段的確認與推進邏輯
- [x] 5.10 實作內容編輯與重新生成功能
- [x] 5.11 實作進度保存與恢復功能
- [x] 5.12 實作課程計劃匯出功能

## 階段 5B: Prompt 可配置系統

- [x] 5B.1 建立 prompt 資料庫表（7 個 prompt 類型）
- [x] 5B.2 實作預設 prompt templates 初始化
- [x] 5B.3 實作 prompt 變數系統（{basic_info}、{rationale} 等）
- [x] 5B.4 實作 Prompt 管理頁面 UI
- [x] 5B.5 實作 Prompt 列表顯示功能
- [x] 5B.6 實作單個 Prompt 編輯功能
- [x] 5B.7 實作 Prompt 即時生效機制
- [ ] 5B.8 實作 Prompt 版本歷史記錄
- [x] 5B.9 實作 Prompt 重置為預設值功能
- [x] 5B.10 實作 Prompt 變數替換邏輯

## 階段 6: 安全與優化

- [ ] 6.1 實作 API key 輸入驗證
- [ ] 6.2 實作速率限制（Rate limiting）
- [ ] 6.3 優化 OpenAI API 請求成本
- [x] 6.4 實作錯誤處理與用戶友善的錯誤訊息
- [x] 6.5 添加 loading 狀態和進度指示

## 階段 7: 測試與部署準備

- [ ] 7.1 撰寫單元測試
- [ ] 7.2 撰寫整合測試
- [ ] 7.3 E2E 測試完整工作流程
- [ ] 7.4 安全性測試
- [ ] 7.5 準備 DigitalOcean 部署配置檔案
- [ ] 7.6 創建 Dockerfile 或 App Platform 配置
- [ ] 7.7 設定環境變數和 secrets

## 階段 8: DigitalOcean 部署

- [ ] 8.1 創建 DigitalOcean 專案
- [ ] 8.2 設置 Managed PostgreSQL 資料庫
- [ ] 8.3 設置 DigitalOcean Spaces 存儲
- [ ] 8.4 配置後端服務到 App Platform
- [ ] 8.5 配置前端靜態網站到 App Platform
- [ ] 8.6 設定環境變數和 secrets
- [ ] 8.7 配置域名和 SSL 證書
- [ ] 8.8 設置監控和日誌
- [ ] 8.9 執行資料庫遷移
- [ ] 8.10 生產環境測試
- [ ] 8.11 性能測試和優化
- [ ] 8.12 正式上線
