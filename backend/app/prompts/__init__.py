"""
Prompt 模板系統
"""

# 預設 prompt 模板
DEFAULT_PROMPTS = {
    1: {
        "name": "教學理念生成",
        "type": "rationale",
        "content": """請根據以下基本課程資訊，撰寫一份完整的教學理念。

基本資訊：
- 課程標題：{title}
- 年級：{grade}
- 課程時長：{duration} 分鐘
- 學生人數：{student_count}
- 教室設備：{classroom_equipment}
{upload_content}

請包含以下內容：
1. 為何選此主題
2. 學生起點分析（先備知識、經驗、困難、動機）
3. 教學價值（知識、技能、情意、應用）
4. 跨領域連結

請以結構化的方式呈現。""",
        "variables": ["title", "grade", "duration", "student_count", "classroom_equipment", "upload_content"]
    },
    2: {
        "name": "學習目標生成",
        "type": "objectives",
        "content": """請根據以下資訊，生成完整的學習目標。

課程資訊：
- 課程標題：{title}
- 年級：{grade}

教學理念：
{rationale}

請生成以下三大類型的學習目標：
1. 認知目標（Cognitive）：理解、分析等
2. 技能目標（Psychomotor）：操作、示範等
3. 情意目標（Affective）：欣賞、展現等

每個目標請包含：
- 目標描述
- 評量方式
- 驗收標準

請以結構化的方式呈現。""",
        "variables": ["title", "grade", "rationale"]
    },
    3: {
        "name": "教學策略推薦",
        "type": "strategies",
        "content": """請根據以下資訊，推薦五種適合的教學方法。

課程資訊：
- 課程標題：{title}
- 年級：{grade}
- 課程時長：{duration} 分鐘

教學理念：
{rationale}

學習目標：
{objectives}

請推薦五種教學策略，每個策略請包含：
1. 教學方法名稱
2. 選擇理由
3. 實施建議
4. 預期效果

請以條列式呈現。""",
        "variables": ["title", "grade", "duration", "rationale", "objectives"]
    },
    4: {
        "name": "教學流程設計",
        "type": "flow",
        "content": """請根據以下資訊，設計完整的教學流程。

課程資訊：
- 課程標題：{title}
- 課程時長：{duration} 分鐘

教學理念：{rationale}

學習目標：{objectives}

教學策略：{strategies}

請設計詳細的教學流程，包含：
1. 時間分配（引起動機、概念教學、實作、總結）
2. 各階段活動內容
3. 教師與學生行動
4. 檢核點
5. 所需材料

請以表格或結構化的方式呈現。""",
        "variables": ["title", "duration", "rationale", "objectives", "strategies"]
    },
    5: {
        "name": "PPT 生成",
        "type": "ppt",
        "content": """請根據以下教學流程，設計 PowerPoint 簡報的大綱。

課程標題：{title}

教學流程：
{teaching_flow}

請設計 PPT 大綱，包含：
1. 封面
2. 課程目標
3. 各階段內容（對應教學流程）
4. 總結與反思

請以條列式呈現每張簡報的標題和重點內容。""",
        "variables": ["title", "teaching_flow"]
    },
    6: {
        "name": "學習單生成",
        "type": "worksheet",
        "content": """角色設定：
您是一位深諳慈濟教育理念與學習單設計的資深教育專家，擅長將教學流程轉化為具體的學習單，透過精心設計的題目與活動，引導學生深化學習、實踐慈濟核心價值。
任務說明：
請根據前述完整教案（教育理念、學習目標、教學流程），設計符合教學需求的學習單，確保學習單能有效支持教學目標的達成，並融入慈濟人文精神。

課程基本資訊：
課程標題：{title}
年級：{grade}
課程時長：{duration} 分鐘
學生人數：{student_count}

已產出內容：
教育理念：{rationale}
學習目標：{objectives}
教學流程：{teaching_flow}

學習單設計架構（依序完成以下部分）
一、學習單規劃總覽（200-250字）
設計說明：
學習單數量與類型：
根據教學流程，本課程需要設計___份學習單
學習單類型：（如課前預習單、課中學習單、課後延伸單、反思紀錄單等）
各學習單的使用時機與目的

學習單與教學流程的對應：
學習單A：對應教學階段___，使用時間第___分鐘
學習單B：對應教學階段___，使用時間第___分鐘
學習單C：對應教學階段___（課後使用）

學習單與學習目標的連結：
每份學習單主要支持哪些學習目標（認知、技能、情意）
如何透過學習單檢核目標達成度

慈濟人文融入方式：
學習單如何體現感恩、尊重、愛的精神
是否融入靜思語、慈濟故事或相關元素

二、學習單詳細設計（每份學習單包含以下要素）
學習單一：（學習單名稱）
基本資訊欄位：
學習單標題：（具吸引力且貼近主題的標題）
適用年級：
學生姓名欄：
班級座號欄：
日期欄：
慈濟核心價值標註：（本學習單主要實踐的價值，如感恩、尊重、愛等）

使用說明：
使用時機：在教學流程的哪個階段使用（如引起動機階段、發展活動子活動二、綜合活動階段等）
建議時間：完成此學習單需要___分鐘
對應學習目標：（列出目標編號與內容）
教師引導重點：教師在發放學習單時應如何引導與說明

學習單內容設計：
Part 1：暖身活動或引導區（如適用）
設計說明：此部分用於引發學生思考、連結舊經驗或營造學習情境
內容範例：
標題文字：（如「想一想」、「回憶看看」、「你的經驗」等）
引導文字：（2-3句話，引導學生進入學習情境）
題目設計：
題目1：（開放性問題，引發思考）
題型：（簡答、圖文並茂、選擇等）
作答空間：（預留適當行數或格子）
設計目的：（此題目要達成什麼學習或情意目標）

Part 2：核心學習區
設計說明：此部分為學習單主體，直接對應教學活動內容
內容範例：
區塊標題：（清楚標示學習重點）
說明文字：（簡要說明學習任務）

題目2：（知識理解類題目）
題型：（填充、配合、排序、概念圖等）
題目內容：（具體題幹）
作答空間：（適當格式）
對應學習目標：認知目標___
難度等級：（基礎、進階、挑戰）

題目3：（技能應用類題目）
題型：（實作記錄、步驟填寫、觀察紀錄等）
題目內容：
作答空間：（如表格、流程圖框架等）
對應學習目標：技能目標___
完成方式：（個人、小組合作）

題目4：（情意反思類題目）
題型：（心情記錄、自我檢核、價值澄清等）
題目內容：
作答空間：
對應學習目標：情意目標___
慈濟價值連結：（此題如何實踐感恩、尊重、愛）

Part 3：深化或延伸區（如適用）
設計說明：提供進階挑戰或差異化學習機會
內容範例：
區塊標題：（如「挑戰題」、「加油站」、「想得更深」等）

題目5：（高層次思考題目）
題型：（比較分析、評鑑、創造等）
題目內容：
作答空間：
差異化說明：（此題為選做或進階學習者挑戰）

Part 4：慈濟人文實踐區
設計說明：此部分特別聚焦於慈濟核心價值的內化與實踐
內容範例：
區塊標題：（如「感恩時刻」、「愛的行動」、「尊重練習」等）
慈濟元素融入：（靜思語、小故事、圖像等）

題目6：感恩覺察
引導文字：（如「透過今天的學習，我要感恩___」）
題目內容：
請寫下在這次學習中，你要感恩的人、事、物，並說明為什麼
作答空間：（3-5行）
引導提示：（提供思考方向，如「可以是幫助你的同學、支持你的家人、提供資源的環境等」）

題目7：尊重實踐
引導文字：
題目內容：
在學習過程中，你如何展現對自己、對他人、對環境的尊重？請舉出具體例子
作答空間：
自我檢核：（提供檢核指標，如「我有認真傾聽他人意見」、「我有愛惜使用的材料」等）

題目8：愛的傳遞
引導文字：
題目內容：
學習之後，你想要採取什麼具體行動，把愛傳遞出去？
作答空間：
行動承諾：（提供行動計畫框架）

Part 5：自我評量或反思區
設計說明：引導學生覺察自己的學習歷程與成長
內容範例：
區塊標題：（如「學習回顧」、「我的成長」等）

題目9：學習自評
評量向度：（可包含知識理解、技能表現、態度展現等）
評量方式：（如量表、檢核表、開放反思等）
評量內容：
我在這次學習中的收穫是___（非常多、很多、普通、有一些、很少）
我最喜歡的學習活動是___，因為___
我遇到的困難是___，我是這樣解決的___
我給自己的表現打___分（滿分10分），理由是___

題目10：教師回饋欄
留白空間：提供教師書寫鼓勵或建議的空間
引導文字：「老師的話」

靜思語或勉勵語：
在學習單底部放置一句與主題相關的靜思語或證嚴上人法語，作為精神指引
範例：「做好事不能少我一人，做壞事不能多我一人」

視覺設計建議：
版面配置：
留白適當，不過於擁擠
字體大小適合該年級學生閱讀（低年級較大，高年級可適度縮小）
重要說明文字可使用框線或底色標示

圖像使用：
適度加入與主題相關的插圖或圖示
可加入慈濟標誌或相關圖像（如慈濟LOGO、靜思語插畫等）
為低年級學生提供更多視覺提示

色彩運用：
使用溫暖、正向的色調
避免過度花俏影響專注
確保印刷後清晰可讀

差異化設計（如適用）：
如果班級學生程度差異大，可設計以下差異化版本：

基礎版：
提供更多鷹架與提示
簡化題目複雜度
增加圖像輔助

進階版：
減少提示，增加開放性
加入挑戰題或延伸探究
要求更深入的思考與表達

彈性選做區：
標示某些題目為「選做」或「加分題」
讓不同程度學生都能有成就感

三、其他學習單設計（如有多份）
學習單二：（學習單名稱）
（依照上述格式，完整設計第二份學習單）
學習單三：（學習單名稱）
（依照上述格式，完整設計第三份學習單）

四、學習單使用指引（200-250字）
教師使用說明：
課前準備：
學習單印製數量：每位學生___份，另備___份備用
印製規格：（A4、雙面或單面、彩色或黑白）
其他準備事項：（如需搭配的教具、材料等）

課中使用流程：
學習單發放時機：（具體在教學流程的哪個時間點）
教師說明重點：（發放時需對學生說明什麼）
完成方式：（個人獨立完成、小組討論、親子共作等）
時間控制：（各部分建議花費的時間）
巡視重點：（教師在學生作答時應注意什麼）

課後處理：
學習單收回與批改方式
回饋給予方式：（詳細批改、重點回饋、學生互評等）
學習單的後續運用：（如張貼展示、裝訂成冊、親師溝通等）
是否需要家長簽名或共同參與

學生使用提醒：
教師應提醒學生的重要事項，如：
字跡工整，認真作答
尊重自己與他人的作品
遇到困難可尋求協助
展現感恩尊重愛的態度

五、學習單評量規準（150-200字）
評量向度與標準：
內容完整性（佔___％）
優良：所有題目皆完整作答，內容充實
良好：大部分題目完整作答
待加強：多處未完成或過於簡略

思考深度（佔___％）
優良：展現深入思考，有獨特見解
良好：能回答重點，思考清楚
待加強：思考表面，未深入探討

慈濟價值實踐（佔___％）
優良：充分展現感恩尊重愛的精神
良好：能覺察並表達相關價值
待加強：較少觸及情意層面

表達呈現（佔___％）
優良：表達清晰，呈現用心
良好：表達清楚，字跡工整
待加強：表達不夠清楚或字跡潦草

總分計算方式：（如適用）

六、學習單成效檢核（100-150字）
檢核向度：
全文不可使用任何特殊字元或符號（如星號、方框勾選符號、表情符號等），僅使用文字、數字、標點符號與空格
學習單題目文字應清楚明確，避免學生誤解
作答空間預留要適當，不過多也不過少
確保學習單能在預定時間內完成，不造成學生過大壓力""",
        "variables": ["title", "grade", "duration", "student_count", "rationale", "objectives", "teaching_flow"]
    }
}


def get_prompt(step_number: int) -> dict:
    """獲取指定步驟的 prompt 模板"""
    return DEFAULT_PROMPTS.get(step_number, {})


def get_all_prompts() -> dict:
    """獲取所有 prompt 模板"""
    return DEFAULT_PROMPTS
